generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model OrganizationTypes {
  type               String          @id
  organizationEntity Organizations[]

  @@map("organization_types")
}

model Organizations {
  id                     String             @id @default(uuid())
  name                   String             @unique
  description            String
  organizationType       String             @map("organization_type")
  organizationTypeEntity OrganizationTypes  @relation(fields: [organizationType], references: [type])
  users                  Users[]
  invitationEmailEntity  InvitationEmails[]

  @@map("organizations")
}

model Roles {
  role                  String             @id
  invitationEmailEntity InvitationEmails[]
  UserRole              UserRole[]

  @@map("roles")
}

model InvitationEmails {
  code               String         @id
  email              String
  rolesEntity        Roles?         @relation(fields: [role], references: [role])
  role               String
  organizationEntity Organizations? @relation(fields: [organizationId], references: [id])
  organizationId     String         @map("organization_id")

  @@map("invitation_emails")
}

model UserRole {
  rolesEntity Roles? @relation(fields: [role], references: [role])
  role        String
  userEntity  Users  @relation(fields: [userId], references: [id])
  userId      String @map("user_id")

  @@id([userId, role])
  @@map("user_role")
}

model Users {
  id                 String         @id @default(uuid())
  email              String         @unique
  firstName          String         @map("first_name")
  lastName           String         @map("last_name")
  organizationEntity Organizations? @relation(fields: [organizationId], references: [id])
  organizationId     String         @map("organization_id")
  userRoleEntity     UserRole[]
  passwordEntity     Passwords?

  @@map("users")
}

model Passwords {
  user     Users  @relation(fields: [userId], references: [id])
  userId   String @unique @map("user_id")
  password String

  @@map("passwords")
}
